<notification ng-if="showInvalidDates" text="End date ahead of start date" type="error" action="closeNotification"></notification>

<div class="form-header">
	<div class="metro-tile metro-peterriver metro-left back-button">
	</div>

	<div class="metro-tile metro-peterriver admin-banner">
		<div class="metro-content banner-content">
			<i class="material-icons"> <span class="banner-icon"> graphic_eq </span></i>
			<span class="banner-title"> Product Statistics </span>
		</div>
	</div>
</div>

<div class="col-md-s1">

	<div class="search-box col-md-6 col-md-s2">
		<div class="search-glass"><i class="material-icons"> <span class="glass-icon"> search</span></i></div>
		<input ng-change="filterProducts()" ng-model="productSearch" ng-change="filterProducts()" type="text" class="search-input" placeholder="Enter Product Name Here"/>
	</div>

	<div ng-if="showResults" class="search-list col-md-6 col-md-s2">
		<ul class="nav-pane-items">
			<li ng-click="updateData('all')" class="nav-pane-item nav-white"> All </li>
			<li class="nav-pane-item nav-white" ng-click="updateData($index)" ng-repeat="product in results">
				{{ product.name }}
			</li>
		</ul>
	</div>

	<div class="meh">
		<div class="stat-inputs col-md-5">
			<label for="start"> From </label>
			<input ng-model="startDate" ng-change="updateData('all')" id="start" type="date">
		</div>

		<div class="stat-inputs col-md-5">
			<label for="end"> To </label>
			<input ng-model="endDate" ng-change="updateData('all')" id="end" type="date">
		</div>
	</div>

	<div class="chart-container stat-chart-container" align="center">

		<div class="stat-view stat-view-n">
			<div class="stat-ribbon">
				<div class="metro-tile metro-peterriver">
					<div class="metro-content">
						<div class="ribbon-header"> &nbsp </div>
						<div class="ribbon-header"> &nbsp </div>
						<div class="ribbon-header"> Average (income per day) </div>
						<div ng-if="prodData.length >= 2" class="ribbon-content"> Rs. {{ average.toFixed(2) }} </div>
						<div ng-if="prodData.length < 2" class="ribbon-content"> Not Available </div>
					</div>
				</div>
				<div class="metro-tile metro-sunflower">
					<div class="metro-content">
						<div class="ribbon-header"> &nbsp </div>
						<div class="ribbon-header"> &nbsp </div>
						<div class="ribbon-header"> Total Worth </div>
						<div ng-if="prodData.length >= 2" class="ribbon-content"> Rs. {{ sum.toFixed(2) }} </div>
						<div ng-if="prodData.length < 2" class="ribbon-content"> Not Available </div>
					</div>
				</div>
				<div class="metro-tile metro-greensea">
					<div class="metro-content">
						<div class="ribbon-header"> &nbsp </div>
						<div class="ribbon-header"> &nbsp </div>
						<div class="metro-content ribbon-header"> Peak Sales </div>
						<div ng-if="prodData.length >= 2" class="ribbon-content"> Rs. {{ peak.toFixed(2) }} </div>
						<div ng-if="prodData.length < 2" class="ribbon-content"> Not Available </div>
					</div>
				</div>
			</div>
		</div>

		<div class="chart-view chart-view-stat">
			<chart-window ng-if="prodData.length > 1" width="200" height="200" type="line" line-color="#3498db" data="prodData" text-color="#000"></chart-window>
			<div ng-if="prodData.length < 2" class="col-md-s1 chart-label"> Not enough data points to plot </div>
		</div>

	</div>
</div>